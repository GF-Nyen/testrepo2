---
title: "GEOHEMI"
output: html_document
date: "2023-02-06"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
library(broom)
library("ggplot2")
theme_set(theme_bw()) #this sets the map theme in ggplot to dark on light
library(sf)
library(forcats)
library(rnaturalearth)
library(rnaturalearthdata)
library(kknn)
library("ggspatial")
library(rgdal)
library(terra)

```

```{r}
world <- ne_countries(scale = "Medium", returnclass = "sf")
class(world)

(sites <- data.frame(longitude = c(-80.144005, -80.109), latitude = c(26.479005, 
    26.83)))

ggplot(data = world) +
    geom_sf() +
    geom_point(data = sites, aes(x = longitude, y = latitude), size = 4, 
        shape = 23, fill = "darkred") +
    coord_sf(xlim = c(-88, -78), ylim = c(24.5, 33), expand = TRUE)
```




## Stand ID is where the overlap betwen the two data sets lies.##

```{r}
colnames(LAT.LONGS)[4]  <- "Plot.ID"    # change column name for columns to match under Plot.ID

cleandf <-inner_join(HEMIMESS,LAT.LONGS, by=c("Plot.ID")) # Joined the two data sets matched between Plot.ID
print(cleandf)
```


```{r}
##This chunk is for pruning down the dataframe

df1 <- select(cleandf, StandID.x, Plot.ID, X, Y, X..Site.Open, LAI.4Ring) #Here I selected the useful data
print(df1)


```
```{r}
library(rgdal)
shape <- readOGR(dsn = ".", layer = "twingates.shp")
```


```{r}
#TEST CHUNK THIS ONE WORKS!

library("sf")
#new
library("sf")
setwd("C:/Users/gnyen/Desktop/ceststands")
SHPFILE1 <- sf::st_read("estab_outline.shp")
(ggplot(SHPFILE1) 
  geom_sf(aes(fill = AREA))
#new

aoi_boundary <- st_read(
  "C:/Users/gnyen/Desktop/SHPS/twingates.shp") #this one points to the file and reads it.

(sites <- data.frame(longitude = c(select(df1, 2)), latitude = c(select(df1, 3))))

ggplot(data = SHPFILE1) + # this is where you put the shapefile of the jones center/ stands #JC is where "world" was
    geom_sf() +
    geom_point(data = df1, aes(x = X, y = Y), size = 4, 
        shape = 23, fill = "darkred") +
       coord_sf(xlim = c(-84.40, -84.51), ylim = c(31.185, 31.24), expand = FALSE)
```



```{r}
#attach
#JONES_AOI1 <-  
library("sf")
 # shapename <- read_sf('~Desktop\Forestry From Josh\Plantation data\forestry\maps\data\archive\Twin Gates')

##shape <- read_sf(dsn = "C:/Users/gnyen/Desktop/Forestry From Josh/Plantation data/forestry/maps/data/archive/Twin Gates", layer = "twingates.shp")
#shapefile located @ --> (system.file("C:/Users/gnyen/Desktop/SHPS/twingates.shp"))

aoi_boundary <- st_read(
  "C:/Users/gnyen/Desktop/SHPS/twingates.shp") #this one points to the file and reads it.

 world <- ne_countries(scale = "medium", returnclass = "sf") class(world) 

(sites <- data.frame(longitude = c(select(df1, 2)), latitude = c(select(df1, 3))))

ggplot(data = world + # this is where you put the shapefile of the jones center/ stands #JC is where "world" was
    geom_sf() +
    geom_point(data = df1, aes(x = X, y = Y), size = 4, 
        shape = 23, fill = "darkred") +
    coord_sf(xlim = c(-84.40, -84.51), ylim = c(31.185, 31.24), expand = FALSE)

```

```{r} 
## another test chunk to fix the one above
library("sf")


aoi_boundary <- st_read(
  "C:/Users/gnyen/Desktop/SHPS/twingates.shp") #this one points to the file and reads it.

(sites <- data.frame(longitude = c(select(df1, 2)), latitude = c(select(df1, 3))))

ggplot(data = aoi_boundary, size = 3, color = black, fill = "cyan1") + # this is where you put the shapefile of the jones center/ stands #JC is where "world" was
    geom_sf() +
    geom_point(data = df1, aes(x = X, y = Y), size = 3, 
        shape = 23, fill = "darkred") +
       coord_sf(xlim = c(-84.40, -84.51), ylim = c(31.185, 31.24), expand = FALSE)
```

```{r}
#TEST CHUNK THIS ONE WORKS! Files are named estab_outline and located in ceststands folder on desktop
myEDGE <- readOGR(
  dsn= paste0(getwd(), "C:/Users/gnyen/Desktop/ceststands/estab_outline.shp") ,
  layer= "[[1]]",
  verbose = FALSE
)

aoi_boundary <- st_read(
  "C:/Users/gnyen/Desktop/ceststands/estab_outline.shp") #this one points to the file and reads it.
edge <- pull(aoi_boundary, geometry)
print
print(edge)

(sites <- data.frame(longitude = c(select(df1, 2)), latitude = c(select(df1, 3))))

ggplot(data = edge) + # this is where you put the shapefile of the jones center/ stands #JC is where "world" was
   
    geom_sf(data = edge) +
    geom_point(data = df1, aes(x = X, y = Y), size = 1, 
        shape = 23, fill = "darkred") +
       coord_sf(xlim = c(-84.40, -84.51), ylim = c(31.185, 31.24), expand = FALSE)

summary(edge)
```



```{r} 
#this works to plot the plots!!!
library(sf)
library(ggplot2)
library(apcf)
setwd("C:/Users/gnyen/Desktop/ceststands")
aoi <- st_read("estab_outline.shp")
plot(aoi$geometry)
st_geometry_type(aoi)


```

```{r}
##This chunk is for pruning down the dataframe

new_pts <- select(GISPOINTS, StandID, PlotID, X_LAT, Y_LONG,) #Here I selected the useful data
print(new_pts)


```



```{r} 

library("sf")
setwd("C:/Users/gnyen/Desktop/ceststands")
SHPFILE1 <- sf::st_read("estab_outline.shp")
ggplot(SHPFILE1) +
  geom_sf(aes(fill = AREA))

setwd("C:/Users/gnyen/Desktop/ceststands")
aoi <- st_read("estab_outline.shp")
plot(aoi$geometry)
st_geometry_type(aoi)

aoi_boundary <- st_read(
  "C:/Users/gnyen/Desktop/SHPS/twingates.shp") #this one points to the file and reads it.




(sites <- data.frame(longitude = c(select(df1, 2)), latitude = c(select(df1, 3))))
ggplot(SHPFILE1) 
ggplot(data = aoi) + # this is where you put the shapefile of the jones center/ stands #JC is where "world" was
    geom_sf() +

    geom_point(data = GISPOINTS, aes(x = X_LAT, y = Y_LONG), size = 8, 
        shape = 23, fill = "darkred") +
       coord_sf(xlim = c(-84.40, -84.51), ylim = c(31.185, 31.24), expand = FALSE)


```
```{r}

library("sf")
setwd("C:/Users/gnyen/Desktop/ceststands")
SHPFILE1 <- sf::st_read("estab_outline.shp")
ggplot(SHPFILE1) +
  geom_sf(aes()) +
 geom_point(data = GISPOINTS, aes(x = X_LAT, y = Y_LONG), size = .5, 
        shape = 23, fill = "darkred")
       










```

